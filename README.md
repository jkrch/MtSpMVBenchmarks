# MtSpMVBenchmarks

This repository is a collection of benchmarks for the Julia package [MtSpMV](https://github.com/jkrch/MtSpMV.jl).

Because the number of Julia threads has to be set before the start of a Julia session and can not be changed from inside it (other then e.g. the number of BLAS threads).
the benchmarks in this repository have to be run by a shell script, in which the number of Julia threads can be controlled.

## Usage

```console
foo@bar:~$ cd dir
foo@bar:~/dir$ git clone https://github.com/jkrch/MtSpMVBenchmarks
```
Clones the repository to your computer (replace 'dir' with the directory where you want the repository to be cloned to).

```console
foo@bar:~/dir$ cd MtSpMVBenchmarks/src
```
Changes to the directory where the benchmarks can be run from.

Here is a quick example how to run benchmarks (see the documentation for more).

```console
foo@bar:~/dir/MtSpMVBenchmarks/src$ ./run_nthreads julia 'par mkl' 'csr csc' '1 72' spmv poisson 1000
```
Benchmarks the multithreaded CSR MatVec MtSpMV.jl and the multithreaded CSR and CSC MatVec of MKLSparse.jl for `1:72` for a matrix generated by [MatrixDepot.jl](https://github.com/JuliaMatrices/MatrixDepot.jl).

## ToDo
* Documentation
* Preconditioning
* GFlops (maybe)
* Unit testing (Julia and Shell)
